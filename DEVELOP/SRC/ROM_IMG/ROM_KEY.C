/****************************************************************/
/*																*/
/*					Music Viewer	Key sub routine				*/
/*						for Wonder Swan Emulator				*/
/*																*/
/*								Programmed by.					*/
/*									S.W.						*/
/*																*/
/****************************************************************/
/*--------------------------------------*/
/*	定数定義							*/
/*--------------------------------------*/

//	現在は無し。



/*--------------------------------------*/
/*	グローバル変数定義					*/
/*--------------------------------------*/




/*--------------------------------------------------------------*/
/*	キー読み込み												*/
/*--------------------------------------------------------------*/
/*●引数	無し												*/
/*●返値	キー												*/
/*●処理	押されているキーを読み込む							*/
/*●開発	S.W.												*/
/*--------------------------------------------------------------*/
int	Inkey0(){
	int	key;

	outb(KEY,KEY_GroupABS);
	key=(inb(KEY)        & 0x000F);
	outb(KEY,KEY_GroupX);
	key|=(inb(KEY) * 16  & 0x00F0);
	outb(KEY,KEY_GroupY);
	key|=(inb(KEY) * 256 & 0x0F00);

	return	key;
};
/*--------------------------------------------------------------*/
/*	キーウェイト												*/
/*--------------------------------------------------------------*/
/*●引数	無し												*/
/*●返値	キー												*/
/*●処理	押されているキーを読み込む							*/
/*●開発	S.W.												*/
/*--------------------------------------------------------------*/
int	KeyWait(){
	int	key=0;

	while(key==0){key=Inkey0();};

	return	key;
};

/*--------------------------------------------------------------*/
/*	クリックタイプキー読み込み									*/
/*--------------------------------------------------------------*/
/*●引数	無し												*/
/*●返値	キー												*/
/*●処理	押されているキーを読み込む							*/
/*			(押しなおさないと更新されない)						*/
/*●開発	FUN-X												*/
/*--------------------------------------------------------------*/
int KeyHit(void)
{
	static int keyold=0;	/* 最後に読まれたキー状態 */
	int key,keyhit;

	key=Inkey0();

	keyhit = key & (~keyold);

	keyold = key;

    return keyhit;
}

